CREATE DATABASE CSDL;

USE CSDL;



CREATE TABLE KHACHHANG
(
    MAKH VARCHAR (50) NOT NULL PRIMARY KEY,
    TENKH VARCHAR(50)
);




CREATE TABLE NHANVIEN
(
    MANV VARCHAR (50) NOT NULL PRIMARY KEY,
    TENNV VARCHAR(50)
);



CREATE TABLE TAIKHOAN
(
    TENDN VARCHAR (50) NOT NULL PRIMARY KEY,
    MATKHAU VARCHAR(50) NOT NULL,
    CHUCVU VARCHAR(50)  NOT NULL,
    MANV VARCHAR(50) 
);

CREATE TABLE HOADON
(
    MAHD VARCHAR(50) NOT NULL PRIMARY KEY,
    TONGTIEN int,
    MANV VARCHAR(50) ,
    MAKH VARCHAR(50) ,
    NGAYTHANG DATETIME
);

CREATE TABLE TACGIA
(
    MATG VARCHAR (50) NOT NULL PRIMARY KEY,
    TENTG VARCHAR(50)
);

CREATE TABLE NHACC
(
    MANCC VARCHAR (50) NOT NULL PRIMARY KEY,
    DIACHI VARCHAR(100),
    SDT VARCHAR(50)
);
CREATE TABLE LOAISACH
(
    MALOAI VARCHAR (50) NOT NULL PRIMARY KEY,
    TENTHELOAI VARCHAR(50)
);


CREATE TABLE SACH
(
    MASACH VARCHAR (50) NOT NULL PRIMARY KEY,
    TENSACH VARCHAR(50),
    MANCC VARCHAR(50) NOT NULL ,
    MATG VARCHAR(50) NOT NULL ,
    GIA int,
    SLTON INT,
    MALOAI VARCHAR(50) NOT NULL 
);


CREATE TABLE CHITIETHD
(
    MAHD VARCHAR (50) NOT NULL,
    MASACH VARCHAR(50) NOT NULL, 
    SOLUONG INT,
    GIA int
);


CREATE TABLE PHIEUNHAP
(
    MAPN VARCHAR (50) NOT NULL PRIMARY KEY,
    TONGTIEN int,
    NGAYTHANG DATETIME,
    MANV VARCHAR(50) ,
    MANCC VARCHAR(50) 
);


CREATE TABLE CHITIETPN
(
   MAPN VARCHAR (50) NOT NULL ,
    MASACH VARCHAR(50) NOT NULL ,
    SOLUONG INT,
    GIA int
);
ALTER TABLE SACH ADD CONSTRAINT fk01_S FOREIGN KEY (MALOAI) REFERENCES LOAISACH (MALOAI);
ALTER TABLE SACH  ADD CONSTRAINT fk02_S FOREIGN KEY (MANCC) REFERENCES NHACC (MANCC);
ALTER TABLE SACH  ADD CONSTRAINT fk03_S FOREIGN KEY (MATG) REFERENCES TACGIA (MATG);
ALTER TABLE TAIKHOAN  ADD CONSTRAINT fk01_TK FOREIGN KEY (MANV) REFERENCES NHANVIEN(MANV);
ALTER TABLE PHIEUNHAP  ADD CONSTRAINT fk01_PN FOREIGN KEY (MANV) REFERENCES NHANVIEN(MANV);
ALTER TABLE PHIEUNHAP   ADD CONSTRAINT fk02_PN FOREIGN KEY (MANCC) REFERENCES NHACC (MANCC);
ALTER TABLE HOADON  ADD CONSTRAINT fk01_HD FOREIGN KEY (MANV) REFERENCES NHANVIEN (MANV);
ALTER TABLE HOADON   ADD CONSTRAINT fk02_HD FOREIGN KEY (MAKH) REFERENCES KHACHHANG (MAKH);
ALTER TABLE CHITIETHD  ADD CONSTRAINT fk01_CTHD FOREIGN KEY (MAHD) REFERENCES HOADON (MAHD);
ALTER TABLE CHITIETHD  ADD CONSTRAINT fk02_CTHD FOREIGN KEY (MASACH) REFERENCES SACH (MASACH);
ALTER TABLE CHITIETPN  ADD CONSTRAINT fk01_CTPN FOREIGN KEY (MAPN) REFERENCES PHIEUNHAP (MAPN);
ALTER TABLE CHITIETPN ADD CONSTRAINT fk02_CTPN FOREIGN KEY (MASACH) REFERENCES SACH(MASACH);


INSERT KHACHHANG VALUES('KH1','Nguyễn Anh Dũng');
INSERT KHACHHANG VALUES('KH2','Trần Anh Minh');
INSERT KHACHHANG VALUES('KH3','Lê Chí Kiên');
INSERT KHACHHANG VALUES('KH4','Phạm Chí Thanh');
INSERT KHACHHANG VALUES('KH5','Huỳnh Đăng Khoa');
INSERT KHACHHANG VALUES('KH6','Phan Chiến Thắng');
INSERT KHACHHANG VALUES('KH7','Võ Đức Tài');
INSERT KHACHHANG VALUES('KH8','Đặng Đình Trung');
INSERT KHACHHANG VALUES('KH9','Bùi Gia Huy');
INSERT KHACHHANG VALUES('KH10','Đỗ Hải Đăng');


INSERT NHANVIEN VALUES('NV1','Nguyễn Ngọc Như');
INSERT NHANVIEN VALUES('NV2','Lê Thị Phi Yến');
INSERT NHANVIEN VALUES('NV3','Nguyễn Văn B');
INSERT NHANVIEN VALUES('NV4','Ngô Thanh Tuấn');
INSERT NHANVIEN VALUES('NV5','Nguyễn Thị Trúc Thanh');



INSERT TAIKHOAN VALUES('username1','password1','nhập hàng','NV1');
INSERT TAIKHOAN VALUES('username2','password2','nhập hàng','NV2');
INSERT TAIKHOAN VALUES('username3','password3','bán hàng','NV3');
INSERT TAIKHOAN VALUES('username4','password4','bán hàng','NV4');
INSERT TAIKHOAN VALUES('username5','password5','kiểm kho','NV5');


INSERT HOADON VALUES('HD1',47868,'NV1','KH1','2014-5-6');
INSERT HOADON VALUES('HD2',49340,'NV2','KH2','2021-10-6');
INSERT HOADON VALUES('HD3',46407,'NV3','KH3','2015-8-7');
INSERT HOADON VALUES('HD4',53750,'NV4','KH4','2021-3-21');
INSERT HOADON VALUES('HD5',43506,'NV5','KH5','2015-9-15');


INSERT TACGIA VALUES('TG1','Nguyễn Thành Long');
INSERT TACGIA VALUES('TG2','Ngô Thị Uyêng');
INSERT TACGIA VALUES('TG3','Nguyễn Đăng Khoa');
INSERT TACGIA VALUES('TG4','Nguyễn Ngọc Linh');
INSERT TACGIA VALUES('TG5','Ngô Phước Thịnh');


INSERT NHACC VALUES('NCC1','123A đường Lê Lợi','0876.767.000');
INSERT NHACC VALUES('NCC2','219 Lê thánh Tôn','0823.007.555');
INSERT NHACC VALUES('NCC3','Thị trấn Cần Giuộc, Long An','0911.574.079');
INSERT NHACC VALUES('NCC4','Thành phố Tân An','0876.721.721');
INSERT NHACC VALUES('NCC5','Hà Nội','0834.706.555');


INSERT LOAISACH VALUES('TL1','trinh tham');
INSERT LOAISACH VALUES('TL2','kinh dị');
INSERT LOAISACH VALUES('TL3','đời thường');
INSERT LOAISACH VALUES('TL4','hài hước');
INSERT LOAISACH VALUES('TL5','học đường');


INSERT SACH VALUES('MS1','thám tử lừng danh conan','NCC1','TG1',42706,21,'TL1');
INSERT SACH VALUES('MS2','bí ấn ngôi nhà ma ám','NCC2','TG2',45684,14,'TL2');
INSERT SACH VALUES('MS3','grandblue','NCC3','TG3',40938,24,'TL3');
INSERT SACH VALUES('MS4','ba chàng ngốc','NCC4','TG4',53735,6,'TL4');
INSERT SACH VALUES('MS5','cuộc sống tại trường của các nam sinh','NCC5','TG5',44981,26,'TL5');


INSERT CHITIETHD VALUES('HD1','MS1',2,85412);
INSERT CHITIETHD VALUES('HD2','MS2',5,228420);
INSERT CHITIETHD VALUES('HD3','MS3',8,327504);
INSERT CHITIETHD VALUES('HD4','MS4',6,322410);
INSERT CHITIETHD VALUES('HD5','MS5',1,44981);


INSERT PHIEUNHAP VALUES('PN1',896826,'2014-5-6','NV1','NCC1');
INSERT PHIEUNHAP VALUES('PN2',639576,'2021-10-6','NV2','NCC2');
INSERT PHIEUNHAP VALUES('PN3',982512,'2015-8-7','NV3','NCC3');
INSERT PHIEUNHAP VALUES('PN4',322410,'2021-3-21','NV4','NCC4');
INSERT PHIEUNHAP VALUES('PN5',1169506,'2015-9-15','NV5','NCC5');


INSERT CHITIETPN VALUES('PN1','MS1',21,42706);
INSERT CHITIETPN VALUES('PN2','MS2',14,45684);
INSERT CHITIETPN VALUES('PN3','MS3',24,40938);
INSERT CHITIETPN VALUES('PN4','MS4',6,53735);
INSERT CHITIETPN VALUES('PN5','MS5',26,44981);



